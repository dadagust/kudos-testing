Техническое задание (черновик v1.0)

Проект: kudos.ru — платформа аренды мебели, посуды, текстиля, декора и оборудования для мероприятий.

Дата: 01.09.2025  
Статус: черновик, ожидает уточнений и подтверждения.

## 1. Цели и контекст

● Создать единую веб-платформу, объединяющую текущие ресурсы kudos.ru и kudos.pifakit.ru, с онлайн-бронированием, витриной каталога, корзиной, калькуляторами стоимости и автоматизацией бизнес-процессов.  
● Интегрировать CRM (AmoCRM), оплату, уведомления и документооборот.

**KPI/результаты**  
● Сокращение ручной работы менеджеров за счёт автоматизации статусов, документов и складской доступности.  
● Увеличение конверсии бронирований за счёт прозрачных тарифов, онлайн-оплаты и удобного ЛК.

## 2. Роли и права

1. **Гость (незарегистрированный)**  
   Доступ: витрина, поиск, фильтры, карточки, корзина, расчёт стоимости, оформление заказа (с созданием аккаунта при первом заказе), просмотр статей/портфолио.

2. **Клиент (физ. лицо)**  
   Доступ: всё как у Гостя + личный кабинет (история заказов, статусы, документы, платежи/счета, возвраты залога, избранное, профиль).

3. **Клиент B2B (организатор/декоратор/агентство)**  
   Дополнительно: персональные скидки/прайсы, доступ к корпоративным документам, согласование юридических лиц, скачивание закрывающих документов, лимитированный постоплатный режим (если включён), доступ к API-ключу (опционально).

4. **Менеджер продаж (CRM)**  
   Доступ: список заказов, статусы (новый → в работе → в резерве → оплачено → завершено/возврат), изменение состава/дат, печать сметы, установка коэффициента срока аренды, генерация счетов (аренда/залог/продажа), пересчёт доставки/сетапа, резервы.

5. **Склад/Логистика**  
   Доступ: календарь заказов по датам, старт сборки только при оплаченной аренде; печать накладной/акта приёма-передачи без цен; отметка выдачи и возврата с фактическими количествами, фиксация утерь/повреждений; приёмка на склад; маршруты с картой и назначением водителей, печать маршрутных листов.

6. **Бухгалтерия**  
   Доступ: выставление счетов (аренда/залог/продажа), фиксация оплат и возвратов (в т.ч. залога), отчёты. ЭДО не используется.

7. **Контент-менеджер**  
   Доступ: управление каталогом (категории, карточки, теги, фото/видео), комплекты и сопутствующие товары, SEO-поля, блог/портфолио.

8. **Администратор (суперюзер)**  
   Полные права: управление ролями, тарифами, интеграциями, настройками платформы, доступом к логу и мониторингу.

9. **Водитель (доставщик)**  
   Доступ только к просмотру раздела маршруты без редактирования.

10. **Грузчик (приёмка/отправка)**  
    Просмотр календаря заказов по датам, отметка выдачи и возврата.

---

## 3. User Stories (выборка, сгруппировано по ролям)

**Стадии заказа**

1. Клиент — новая (поступила от Клиента).
2. Менеджер — в работе (взял Менеджер).
3. В резерве (выставляем счёт для B2B, либо ждём оплаты от физ. лица).
4. Отказ — переводит Менеджер (обязательно указать причину).
5. Частично оплачено — переводит Менеджер.
6. Оплачено — переводит Менеджер.
7. Передано на сборку — переводит Склад.
8. Собран — переводит Склад.
9. Отгружен — переводит Склад (отдал Клиенту).
10. Завершён — переводит Склад.
11. Принят с возражениями — переводит Склад.
12. Доплата — Менеджер (выставить счёт клиенту).
13. Завершён с доплатой — Менеджер.

**Примеры User Stories**

- Как гость, я хочу найти товар по фильтрам (цвет, модель, материал, форма, цена), чтобы сузить выбор.
- Как гость, я хочу видеть доступность товара на выбранные даты.
- Как клиент, я хочу положить товары с разными сроками аренды в одну корзину.
- Как клиент, я хочу видеть калькулятор стоимости (аренда/доставка/сетап/залог).
- Как клиент, я хочу оплатить заказ онлайн (карта/СБП) и получить чек.
- Как клиент, я хочу сохранять товары в «Избранное».
- Как клиент, я хочу получать уведомления об изменениях статуса/доставки.
- Как клиент, я хочу отменять заказы.
- Как клиент, я хочу видеть историю заказов, статусы, счета, акты и возвраты залога в ЛК.

(B2B-клиенты, менеджеры, склад, бухгалтерия, контент-менеджеры и администраторы описаны аналогично в документе выше).

---

## 4. Функциональные требования

**4.1 Витрина и каталог**

- Категории/подкатегории, фильтры (мультивыбор), сортировка.
- Карточка товара: галерея, характеристики, сопутствующие позиции, прайс за сутки/период, условия аренды.
- Комплекты и рекомендации («с этим берут»).

**4.2 Корзина/бронирование**

- Выбор дат аренды по каждому товару, проверка доступности.
- Калькулятор: аренда × срок, доставка (объём/вес + транспорт), сетап (время × тариф), залог, надбавки.
- Промо-/скидки, предоплата/постоплата.
- Онлайн-оплата (ЮKassa: карта, СБП), статусы, чек, возвраты.

(и так далее по документу).

---

## 5. Нефункциональные требования

- HTTPS, CSP, rate-limit, audit-log.
- Бэкапы БД/медиа.
- Адаптив, ARIA, alt-тексты, кастомные 404/500.
- Интерфейс — русский язык.

---

## 6. Архитектура и стек

- Backend: Django + DRF, PostgreSQL, Redis, Celery.
- Frontend: Next.js (App Router) с SSR/SSG.
- Интеграции: AmoCRM, ЮKassa, карты/геокодер.
- DevOps: Docker, Nginx, CI/CD.
- Хостинг: VPS/VM.

---

## 7. Интеграции и синхронизация

- CRM: AmoCRM.
- Склад: локальный модуль.
- Оплаты: ЮKassa.
- Карты: Yandex/Dadata.

---

## 8. Данные и модель (укрупнённо)

- Product, Category, Attribute, Bundle, Media.
- Cart, Order, Payment, Deposit.
- InventoryItem, Reservation, DamageReport.
- Customer, Company, Address, Contact.
- Document, Route, Shipment.

---

## 9. Миграция и объединение сайтов

- Инвентаризация контента, 301-редиректы, перенос медиа.
- Проверка ЧПУ, SEO-мета, аналитика.

---

## 11. План работ

1. Анализ (1 неделя).
2. UX-прототипы (1–1.5 недели).
3. UI-дизайн (1 неделя).
4. Backend — ядро (2 недели).
5. Frontend — витрина (1.5 недели).
6. Frontend — корзина/ЛК (1.5 недели).
7. Склад/логистика (1 неделя).
8. Контент-миграция/SEO (0.5 недели).
9. Запуск (1 неделя).

---

## 13. Риски и допущения

- Выбор провайдеров повлияет на интеграции.
- Логика тарифов доставки/сетапа требует формализации.
- Качество мигрируемого контента влияет на сроки.
- Сохранение функционала ЛК возможно только при полном доступе.
